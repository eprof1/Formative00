\
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MIS LLM Endpoint Selector (Student)</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 880px; margin: 24px auto; padding: 0 12px; }
    label { font-weight: 700; display: block; margin-top: 14px; }
    select, input, textarea, button { width: 100%; padding: 10px; margin-top: 6px; font-size: 14px; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .hint { color: #555; font-size: 13px; margin-top: 6px; }
    #out { margin-top: 16px; border: 1px solid #ccc; padding: 12px; white-space: pre-wrap; min-height: 120px; }
    code { background: #f3f3f3; padding: 2px 4px; }
  </style>
</head>
<body>
  <h1>MIS LLM Endpoint Selector</h1>
  <p class="hint">
    Serve this page from <code>C:\Users\&lt;StarID&gt;\html</code> using <code>python -m http.server</code>.
    It can call local LLMs directly (Ollama / LM Studio) or call a local Python proxy (recommended for cloud APIs).
  </p>

  <div class="row">
    <div>
      <label for="provider">Provider</label>
      <select id="provider">
  <option value="ollama">Local Ollama (laptop) — http://localhost:11434/v1</option>
  <option value="campus">Campus LLM (Spark/Enterprise) — set base URL</option>
  <option value="proxy">Cloud (OpenAI via Proxy) — http://localhost:8001/chat</option>
</select>
      <div class="hint">
        If you pick <strong>Python Proxy</strong>, start it first: <code>uvicorn llm_proxy_fastapi:app --port 8001</code>
      </div>
    </div>

    <div>
      <label for="model">Model</label>
      <input id="model" value="llama3.2:1b" />
      <div class="hint">Use <code>llama3.2:1b</code> for setup checks. Your instructor may switch models later.</div>
    </div>
  </div>

  <label for="baseUrl">Campus Base URL (only if you selected Campus LLM)</label>
  <input id="baseUrl" value="http://10.0.0.10:11434/v1" />
  <div class="hint">In class you will receive the correct campus IP. Keep the <code>/v1</code> suffix.</div>

  <label for="prompt">Prompt</label>
  <textarea id="prompt" rows="5">Explain what an API is in 2 sentences for a business student.</textarea>

  <button id="send">Send</button>

  <div id="out"></div>

\
<script>
  const providerEl = document.getElementById('provider');
  const modelEl = document.getElementById('model');
  const promptEl = document.getElementById('prompt');
  const outEl = document.getElementById('out');
  const baseUrlEl = document.getElementById('baseUrl');

  function show(msg) { outEl.textContent = msg; }

  async function send() {
    show("Sending...");
    const provider = providerEl.value;
    const model = modelEl.value.trim();
    const prompt = promptEl.value;

    try {
      if (provider === "proxy") {
        // Local Python proxy avoids browser cloud/CORS issues
        const r = await fetch("http://localhost:8001/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ model, prompt, provider: "openai" })
        });
        const data = await r.json();
        show(data.text ?? JSON.stringify(data, null, 2));
        return;
      }

      let baseUrl = "http://localhost:11434/v1";
      if (provider === "campus") {
        baseUrl = (baseUrlEl.value || "").trim();
        if (!baseUrl) {
          show("ERROR: Please enter the campus base URL (example: http://10.x.x.x:11434/v1).");
          return;
        }
      }

      const r = await fetch(`${baseUrl}/chat/completions`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          // Local/campus endpoints often ignore this
          "Authorization": "Bearer ollama"
        },
        body: JSON.stringify({
          model,
          messages: [{ role: "user", content: prompt }],
          temperature: 0.2
        })
      });
      const data = await r.json();
      show(data?.choices?.[0]?.message?.content ?? JSON.stringify(data, null, 2));
    } catch (e) {
      show(`ERROR: ${e}`);
    }
  }

  document.getElementById('send').addEventListener('click', send);
</script>
</body>
</html>
